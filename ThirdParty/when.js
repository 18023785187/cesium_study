/*! For license information please see when.js.LICENSE.txt */
import{c as createCommonjsModule}from"./_commonjsHelpers-3aae1032.js";var when=createCommonjsModule((function(n,r){var t;t=function(){var n,r,t;function e(n,r,t,e){return o(n).then(r,t,e)}function o(n){var r,t,e;return n instanceof u?r=n:f(n)?(t=c(),n.then((function(n){t.resolve(n)}),(function(n){t.reject(n)}),(function(n){t.progress(n)})),r=t.promise):(e=n,r=new u((function(n){try{return o(n?n(e):e)}catch(n){return i(n)}}))),r}function u(n){this.then=n}function i(n){return new u((function(r,t){try{return t?o(t(n)):i(n)}catch(n){return i(n)}}))}function c(){var n,r,e,f,s,h;return n=new u(a),r=[],e=[],f=function(n,t,o){var u,i;return u=c(),i="function"==typeof o?function(n){try{u.progress(o(n))}catch(n){u.progress(n)}}:function(n){u.progress(n)},r.push((function(r){r.then(n,t).then(u.resolve,u.reject,i)})),e.push(i),u.promise},s=function(n){return l(e,n),n},h=function(n){return n=o(n),f=n.then,h=o,s=v,l(r,n),e=r=t,n},{then:a,resolve:p,reject:m,progress:g,promise:n,resolver:{resolve:p,reject:m,progress:g}};function a(n,r,t){return f(n,r,t)}function p(n){return h(n)}function m(n){return h(i(n))}function g(n){return s(n)}}function f(n){return n&&"function"==typeof n.then}function s(n,r,t,o,u){return p(2,arguments),e(n,(function(n){var i,f,s,h,a,l,p,m,g,j;if(g=n.length>>>0,i=Math.max(0,Math.min(r,g)),s=[],f=g-i+1,h=[],a=c(),i)for(m=a.progress,p=function(n){h.push(n),--f||(l=p=v,a.reject(h))},l=function(n){s.push(n),--i||(l=p=v,a.resolve(s))},j=0;j<g;++j)j in n&&e(n[j],w,y,m);else a.resolve(s);return a.then(t,o,u);function y(n){p(n)}function w(n){l(n)}}))}function h(n,r,t,e){return p(1,arguments),a(n,m).then(r,t,e)}function a(n,r){return e(n,(function(n){var t,o,u,i,f,s;if(u=o=n.length>>>0,t=[],s=c(),u)for(i=function(n,o){e(n,r).then((function(n){t[o]=n,--u||s.resolve(t)}),s.reject)},f=0;f<o;f++)f in n?i(n[f],f):--u;else s.resolve(t);return s.promise}))}function l(n,r){for(var t,e=0;t=n[e++];)t(r)}function p(n,r){for(var t,e=r.length;e>n;)if(null!=(t=r[--e])&&"function"!=typeof t)throw new Error("arg "+e+" must be a function")}function v(){}function m(n){return n}return e.defer=c,e.resolve=o,e.reject=function(n){return e(n,i)},e.join=function(){return a(arguments,m)},e.all=h,e.map=a,e.reduce=function(t,o){var u=r.call(arguments,1);return e(t,(function(r){var t;return t=r.length,u[0]=function(n,r,u){return e(n,(function(n){return e(r,(function(r){return o(n,r,u,t)}))}))},n.apply(r,u)}))},e.any=function(n,r,t,e){return s(n,1,(function(n){return r?r(n[0]):n[0]}),t,e)},e.some=s,e.chain=function(n,r,t){var o=arguments.length>2;return e(n,(function(n){return n=o?t:n,r.resolve(n),n}),(function(n){return r.reject(n),i(n)}),r.progress)},e.isPromise=f,u.prototype={always:function(n,r){return this.then(n,n,r)},otherwise:function(n){return this.then(t,n)},yield:function(n){return this.then((function(){return n}))},spread:function(n){return this.then((function(r){return h(r,(function(r){return n.apply(t,r)}))}))}},r=[].slice,n=[].reduce||function(n){var r,t,e,o,u;if(u=0,o=(r=Object(this)).length>>>0,(t=arguments).length<=1)for(;;){if(u in r){e=r[u++];break}if(++u>=o)throw new TypeError}else e=t[1];for(;u<o;++u)u in r&&(e=n(e,r[u],u,r));return e},e},n.exports=t()}));export{when as default};