var clamp_1=clamp;function clamp(a,r,t){return r<t?a<r?r:a>t?t:a:a<t?t:a>r?r:a}var bitmapSdf=calcSDF,INF=1e20;function calcSDF(a,r){r||(r={});var t,e,n,o,i,d,w,f,h,l,c,s=null==r.cutoff?.25:r.cutoff,y=null==r.radius?8:r.radius,v=r.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");t=r.width,e=r.height,o=a,d=r.stride?r.stride:Math.floor(a.length/t/e)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(w=(f=a).getContext("2d"),t=f.width,e=f.height,o=(h=w.getImageData(0,0,t,e)).data,d=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(w=a,t=(f=a.canvas).width,e=f.height,o=(h=w.getImageData(0,0,t,e)).data,d=4):window.ImageData&&a instanceof window.ImageData&&(h=a,t=a.width,e=a.height,o=h.data,d=4);if(n=Math.max(t,e),window.Uint8ClampedArray&&o instanceof window.Uint8ClampedArray||window.Uint8Array&&o instanceof window.Uint8Array)for(i=o,o=Array(t*e),l=0,c=i.length;l<c;l++)o[l]=i[l*d+v]/255;else if(1!==d)throw Error("Raw data can have only 1 value per pixel");var g=Array(t*e),m=Array(t*e),A=Array(n),u=Array(n),p=Array(n+1),F=Array(n);for(l=0,c=t*e;l<c;l++){var I=o[l];g[l]=1===I?0:0===I?INF:Math.pow(Math.max(0,.5-I),2),m[l]=1===I?INF:0===I?0:Math.pow(Math.max(0,I-.5),2)}edt(g,t,e,A,u,F,p),edt(m,t,e,A,u,F,p);var C=window.Float32Array?new Float32Array(t*e):new Array(t*e);for(l=0,c=t*e;l<c;l++)C[l]=clamp_1(1-((g[l]-m[l])/y+s),0,1);return C}function edt(a,r,t,e,n,o,i){for(var d=0;d<r;d++){for(var w=0;w<t;w++)e[w]=a[w*r+d];for(edt1d(e,n,o,i,t),w=0;w<t;w++)a[w*r+d]=n[w]}for(w=0;w<t;w++){for(d=0;d<r;d++)e[d]=a[w*r+d];for(edt1d(e,n,o,i,r),d=0;d<r;d++)a[w*r+d]=Math.sqrt(n[d])}}function edt1d(a,r,t,e,n){t[0]=0,e[0]=-INF,e[1]=+INF;for(var o=1,i=0;o<n;o++){for(var d=(a[o]+o*o-(a[t[i]]+t[i]*t[i]))/(2*o-2*t[i]);d<=e[i];)i--,d=(a[o]+o*o-(a[t[i]]+t[i]*t[i]))/(2*o-2*t[i]);t[++i]=o,e[i]=d,e[i+1]=+INF}for(o=0,i=0;o<n;o++){for(;e[i+1]<o;)i++;r[o]=(o-t[i])*(o-t[i])+a[t[i]]}}export{bitmapSdf as default};