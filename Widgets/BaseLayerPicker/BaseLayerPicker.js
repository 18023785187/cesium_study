import defined from"../../Core/defined.js";import destroyObject from"../../Core/destroyObject.js";import DeveloperError from"../../Core/DeveloperError.js";import FeatureDetection from"../../Core/FeatureDetection.js";import knockout from"../../ThirdParty/knockout.js";import getElement from"../getElement.js";import BaseLayerPickerViewModel from"./BaseLayerPickerViewModel.js";function BaseLayerPicker(e,t){if(!defined(e))throw new DeveloperError("container is required.");e=getElement(e);var a=new BaseLayerPickerViewModel(t),r=document.createElement("button");r.type="button",r.className="cesium-button cesium-toolbar-button",r.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(r);var i=document.createElement("img");i.setAttribute("draggable","false"),i.className="cesium-baseLayerPicker-selected",i.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),r.appendChild(i);var n=document.createElement("div");n.className="cesium-baseLayerPicker-dropDown",n.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(n);var s=document.createElement("div");s.className="cesium-baseLayerPicker-sectionTitle",s.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),s.innerHTML="Imagery",n.appendChild(s);var o=document.createElement("div");o.className="cesium-baseLayerPicker-section",o.setAttribute("data-bind","foreach: _imageryProviders"),n.appendChild(o);var c=document.createElement("div");c.className="cesium-baseLayerPicker-category",o.appendChild(c);var d=document.createElement("div");d.className="cesium-baseLayerPicker-categoryTitle",d.setAttribute("data-bind","text: name"),c.appendChild(d);var m=document.createElement("div");m.className="cesium-baseLayerPicker-choices",m.setAttribute("data-bind","foreach: providers"),c.appendChild(m);var l=document.createElement("div");l.className="cesium-baseLayerPicker-item",l.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),m.appendChild(l);var u=document.createElement("img");u.className="cesium-baseLayerPicker-itemIcon",u.setAttribute("data-bind","attr: { src: iconUrl }"),u.setAttribute("draggable","false"),l.appendChild(u);var p=document.createElement("div");p.className="cesium-baseLayerPicker-itemLabel",p.setAttribute("data-bind","text: name"),l.appendChild(p);var b=document.createElement("div");b.className="cesium-baseLayerPicker-sectionTitle",b.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),b.innerHTML="Terrain",n.appendChild(b);var v=document.createElement("div");v.className="cesium-baseLayerPicker-section",v.setAttribute("data-bind","foreach: _terrainProviders"),n.appendChild(v);var h=document.createElement("div");h.className="cesium-baseLayerPicker-category",v.appendChild(h);var y=document.createElement("div");y.className="cesium-baseLayerPicker-categoryTitle",y.setAttribute("data-bind","text: name"),h.appendChild(y);var k=document.createElement("div");k.className="cesium-baseLayerPicker-choices",k.setAttribute("data-bind","foreach: providers"),h.appendChild(k);var P=document.createElement("div");P.className="cesium-baseLayerPicker-item",P.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),k.appendChild(P);var L=document.createElement("img");L.className="cesium-baseLayerPicker-itemIcon",L.setAttribute("data-bind","attr: { src: iconUrl }"),L.setAttribute("draggable","false"),P.appendChild(L);var E=document.createElement("div");E.className="cesium-baseLayerPicker-itemLabel",E.setAttribute("data-bind","text: name"),P.appendChild(E),knockout.applyBindings(a,r),knockout.applyBindings(a,n),this._viewModel=a,this._container=e,this._element=r,this._dropPanel=n,this._closeDropDown=function(e){r.contains(e.target)||n.contains(e.target)||(a.dropDownVisible=!1)},FeatureDetection.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(BaseLayerPicker.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),BaseLayerPicker.prototype.isDestroyed=function(){return!1},BaseLayerPicker.prototype.destroy=function(){return FeatureDetection.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),knockout.cleanNode(this._element),knockout.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),destroyObject(this)};export default BaseLayerPicker;