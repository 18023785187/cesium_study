import Check from"../../Core/Check.js";import defaultValue from"../../Core/defaultValue.js";import defined from"../../Core/defined.js";import destroyObject from"../../Core/destroyObject.js";import knockout from"../../ThirdParty/knockout.js";import getElement from"../getElement.js";import InspectorShared from"../InspectorShared.js";import Cesium3DTilesInspectorViewModel from"./Cesium3DTilesInspectorViewModel.js";function Cesium3DTilesInspector(e,t){Check.defined("container",e),Check.typeOf.object("scene",t),e=getElement(e);var i=document.createElement("div"),n=document.createElement("div");n.setAttribute("data-bind","visible: performance");var a=new Cesium3DTilesInspectorViewModel(t,n);this._viewModel=a,this._container=e,this._element=i;var d=document.createElement("div");d.textContent="3D Tiles Inspector",d.className="cesium-cesiumInspector-button",d.setAttribute("data-bind","click: toggleInspector"),i.appendChild(d),i.className="cesium-cesiumInspector cesium-3DTilesInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);var r=document.createElement("div");this._panel=r,r.className="cesium-cesiumInspector-dropDown",i.appendChild(r);var o=InspectorShared.createSection,s=InspectorShared.createCheckbox,l=o(r,"Tileset","tilesetVisible","toggleTileset"),p=o(r,"Display","displayVisible","toggleDisplay"),c=o(r,"Update","updateVisible","toggleUpdate"),m=o(r,"Logging","loggingVisible","toggleLogging"),u=o(r,"Tile Debug Labels","tileDebugLabelsVisible","toggleTileDebugLabels"),h=o(r,"Style","styleVisible","toggleStyle"),C=o(r,"Optimization","optimizationVisible","toggleOptimization"),g=document.createElement("div");g.className="field-group";var b=document.createElement("label");b.className="field-label",b.appendChild(document.createTextNode("Properties: "));var v=document.createElement("div");v.setAttribute("data-bind","text: properties"),g.appendChild(b),g.appendChild(v),l.appendChild(g),l.appendChild(makeButton("togglePickTileset","Pick Tileset","pickActive")),l.appendChild(makeButton("trimTilesCache","Trim Tiles Cache")),l.appendChild(s("Enable Picking","picking")),p.appendChild(s("Colorize","colorize")),p.appendChild(s("Wireframe","wireframe")),p.appendChild(s("Bounding Volumes","showBoundingVolumes")),p.appendChild(s("Content Volumes","showContentBoundingVolumes")),p.appendChild(s("Request Volumes","showRequestVolumes")),p.appendChild(s("Point Cloud Shading","pointCloudShading"));var S=document.createElement("div");S.setAttribute("data-bind","visible: pointCloudShading"),S.appendChild(makeRangeInput("geometricErrorScale",0,2,.01,"Geometric Error Scale")),S.appendChild(makeRangeInput("maximumAttenuation",0,32,1,"Maximum Attenuation")),S.appendChild(makeRangeInput("baseResolution",0,1,.01,"Base Resolution")),S.appendChild(s("Eye Dome Lighting (EDL)","eyeDomeLighting")),p.appendChild(S);var E=document.createElement("div");E.setAttribute("data-bind","visible: eyeDomeLighting"),E.appendChild(makeRangeInput("eyeDomeLightingStrength",0,2,.1,"EDL Strength")),E.appendChild(makeRangeInput("eyeDomeLightingRadius",0,4,.1,"EDL Radius")),S.appendChild(E),c.appendChild(s("Freeze Frame","freezeFrame")),c.appendChild(s("Dynamic Screen Space Error","dynamicScreenSpaceError"));var k=document.createElement("div");k.appendChild(makeRangeInput("maximumScreenSpaceError",0,128,1,"Maximum Screen Space Error")),c.appendChild(k);var y=document.createElement("div");y.setAttribute("data-bind","visible: dynamicScreenSpaceError"),y.appendChild(makeRangeInput("dynamicScreenSpaceErrorDensitySliderValue",0,1,.005,"Screen Space Error Density","dynamicScreenSpaceErrorDensity")),y.appendChild(makeRangeInput("dynamicScreenSpaceErrorFactor",1,10,.1,"Screen Space Error Factor")),c.appendChild(y),m.appendChild(s("Performance","performance")),m.appendChild(n),m.appendChild(s("Statistics","showStatistics"));var I=document.createElement("div");I.className="cesium-3dTilesInspector-statistics",I.setAttribute("data-bind","html: statisticsText, visible: showStatistics"),m.appendChild(I),m.appendChild(s("Pick Statistics","showPickStatistics"));var f=document.createElement("div");f.className="cesium-3dTilesInspector-statistics",f.setAttribute("data-bind","html: pickStatisticsText, visible: showPickStatistics"),m.appendChild(f);var D=document.createElement("div");h.appendChild(D),D.appendChild(document.createTextNode("Color Blend Mode: "));var T=document.createElement("select");T.setAttribute("data-bind",'options: colorBlendModes, optionsText: "text", optionsValue: "value", value: colorBlendMode'),D.appendChild(T);var w=document.createElement("textarea");w.setAttribute("data-bind","textInput: styleString, event: { keydown: styleEditorKeyPress }"),D.className="cesium-cesiumInspector-styleEditor",D.appendChild(w);var V=makeButton("compileStyle","Compile (Ctrl+Enter)");D.appendChild(V);var L=document.createElement("div");L.className="cesium-cesiumInspector-error",L.setAttribute("data-bind","text: editorError"),D.appendChild(L),u.appendChild(s("Show Picked Only","showOnlyPickedTileDebugLabel")),u.appendChild(s("Geometric Error","showGeometricError")),u.appendChild(s("Rendering Statistics","showRenderingStatistics")),u.appendChild(s("Memory Usage (MB)","showMemoryUsage")),u.appendChild(s("Url","showUrl")),C.appendChild(s("Skip Tile LODs","skipLevelOfDetail"));var x=document.createElement("div");x.appendChild(makeRangeInput("skipScreenSpaceErrorFactor",1,50,1,"Skip SSE Factor")),C.appendChild(x);var R=document.createElement("div");R.appendChild(makeRangeInput("baseScreenSpaceError",0,4096,1,"SSE before skipping LOD")),C.appendChild(R);var A=document.createElement("div");A.appendChild(makeRangeInput("skipLevels",0,10,1,"Min. levels to skip")),C.appendChild(A),C.appendChild(s("Load only tiles that meet the max SSE.","immediatelyLoadDesiredLevelOfDetail")),C.appendChild(s("Load siblings of visible tiles","loadSiblings")),knockout.applyBindings(a,i)}function makeRangeInput(e,t,i,n,a,d){d=defaultValue(d,e);var r=document.createElement("input");r.setAttribute("data-bind","value: "+d),r.type="number";var o=document.createElement("input");o.type="range",o.min=t,o.max=i,o.step=n,o.setAttribute("data-bind",'valueUpdate: "input", value: '+e);var s=document.createElement("div");s.appendChild(o);var l=document.createElement("div");return l.className="cesium-cesiumInspector-slider",l.appendChild(document.createTextNode(a)),l.appendChild(r),l.appendChild(s),l}function makeButton(e,t,i){var n=document.createElement("button");n.type="button",n.textContent=t,n.className="cesium-cesiumInspector-pickButton";var a="click: "+e;return defined(i)&&(a+=', css: {"cesium-cesiumInspector-pickButtonHighlight" : '+i+"}"),n.setAttribute("data-bind",a),n}Object.defineProperties(Cesium3DTilesInspector.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Cesium3DTilesInspector.prototype.isDestroyed=function(){return!1},Cesium3DTilesInspector.prototype.destroy=function(){return knockout.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),destroyObject(this)};export default Cesium3DTilesInspector;