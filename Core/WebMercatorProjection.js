import Cartesian3 from"./Cartesian3.js";import Cartographic from"./Cartographic.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import Ellipsoid from"./Ellipsoid.js";import CesiumMath from"./Math.js";function WebMercatorProjection(e){this._ellipsoid=defaultValue(e,Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(WebMercatorProjection.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),WebMercatorProjection.mercatorAngleToGeodeticLatitude=function(e){return CesiumMath.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},WebMercatorProjection.geodeticLatitudeToMercatorAngle=function(e){e>WebMercatorProjection.MaximumLatitude?e=WebMercatorProjection.MaximumLatitude:e<-WebMercatorProjection.MaximumLatitude&&(e=-WebMercatorProjection.MaximumLatitude);var t=Math.sin(e);return.5*Math.log((1+t)/(1-t))},WebMercatorProjection.MaximumLatitude=WebMercatorProjection.mercatorAngleToGeodeticLatitude(Math.PI),WebMercatorProjection.prototype.project=function(e,t){var r=this._semimajorAxis,o=e.longitude*r,i=WebMercatorProjection.geodeticLatitudeToMercatorAngle(e.latitude)*r,a=e.height;return defined(t)?(t.x=o,t.y=i,t.z=a,t):new Cartesian3(o,i,a)},WebMercatorProjection.prototype.unproject=function(e,t){if(!defined(e))throw new DeveloperError("cartesian is required");var r=this._oneOverSemimajorAxis,o=e.x*r,i=WebMercatorProjection.mercatorAngleToGeodeticLatitude(e.y*r),a=e.z;return defined(t)?(t.longitude=o,t.latitude=i,t.height=a,t):new Cartographic(o,i,a)};export default WebMercatorProjection;