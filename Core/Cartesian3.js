import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import CesiumMath from"./Math.js";function Cartesian3(e,t,a){this.x=defaultValue(e,0),this.y=defaultValue(t,0),this.z=defaultValue(a,0)}Cartesian3.fromSpherical=function(e,t){Check.typeOf.object("spherical",e),defined(t)||(t=new Cartesian3);var a=e.clock,r=e.cone,n=defaultValue(e.magnitude,1),i=n*Math.sin(r);return t.x=i*Math.cos(a),t.y=i*Math.sin(a),t.z=n*Math.cos(r),t},Cartesian3.fromElements=function(e,t,a,r){return defined(r)?(r.x=e,r.y=t,r.z=a,r):new Cartesian3(e,t,a)},Cartesian3.clone=function(e,t){if(defined(e))return defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new Cartesian3(e.x,e.y,e.z)},Cartesian3.fromCartesian4=Cartesian3.clone,Cartesian3.packedLength=3,Cartesian3.pack=function(e,t,a){return Check.typeOf.object("value",e),Check.defined("array",t),a=defaultValue(a,0),t[a++]=e.x,t[a++]=e.y,t[a]=e.z,t},Cartesian3.unpack=function(e,t,a){return Check.defined("array",e),t=defaultValue(t,0),defined(a)||(a=new Cartesian3),a.x=e[t++],a.y=e[t++],a.z=e[t],a},Cartesian3.packArray=function(e,t){Check.defined("array",e);var a=e.length,r=3*a;if(defined(t)){if(!Array.isArray(t)&&t.length!==r)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var n=0;n<a;++n)Cartesian3.pack(e[n],t,3*n);return t},Cartesian3.unpackArray=function(e,t){if(Check.defined("array",e),Check.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new DeveloperError("array length must be a multiple of 3.");var a=e.length;defined(t)?t.length=a/3:t=new Array(a/3);for(var r=0;r<a;r+=3){var n=r/3;t[n]=Cartesian3.unpack(e,r,t[n])}return t},Cartesian3.fromArray=Cartesian3.unpack,Cartesian3.maximumComponent=function(e){return Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},Cartesian3.minimumComponent=function(e){return Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},Cartesian3.minimumByComponent=function(e,t,a){return Check.typeOf.object("first",e),Check.typeOf.object("second",t),Check.typeOf.object("result",a),a.x=Math.min(e.x,t.x),a.y=Math.min(e.y,t.y),a.z=Math.min(e.z,t.z),a},Cartesian3.maximumByComponent=function(e,t,a){return Check.typeOf.object("first",e),Check.typeOf.object("second",t),Check.typeOf.object("result",a),a.x=Math.max(e.x,t.x),a.y=Math.max(e.y,t.y),a.z=Math.max(e.z,t.z),a},Cartesian3.magnitudeSquared=function(e){return Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},Cartesian3.magnitude=function(e){return Math.sqrt(Cartesian3.magnitudeSquared(e))};var distanceScratch=new Cartesian3;Cartesian3.distance=function(e,t){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Cartesian3.subtract(e,t,distanceScratch),Cartesian3.magnitude(distanceScratch)},Cartesian3.distanceSquared=function(e,t){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Cartesian3.subtract(e,t,distanceScratch),Cartesian3.magnitudeSquared(distanceScratch)},Cartesian3.normalize=function(e,t){Check.typeOf.object("cartesian",e),Check.typeOf.object("result",t);var a=Cartesian3.magnitude(e);if(t.x=e.x/a,t.y=e.y/a,t.z=e.z/a,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new DeveloperError("normalized result is not a number");return t},Cartesian3.dot=function(e,t){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},Cartesian3.multiplyComponents=function(e,t,a){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a),a.x=e.x*t.x,a.y=e.y*t.y,a.z=e.z*t.z,a},Cartesian3.divideComponents=function(e,t,a){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a),a.x=e.x/t.x,a.y=e.y/t.y,a.z=e.z/t.z,a},Cartesian3.add=function(e,t,a){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a),a.x=e.x+t.x,a.y=e.y+t.y,a.z=e.z+t.z,a},Cartesian3.subtract=function(e,t,a){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a),a.x=e.x-t.x,a.y=e.y-t.y,a.z=e.z-t.z,a},Cartesian3.multiplyByScalar=function(e,t,a){return Check.typeOf.object("cartesian",e),Check.typeOf.number("scalar",t),Check.typeOf.object("result",a),a.x=e.x*t,a.y=e.y*t,a.z=e.z*t,a},Cartesian3.divideByScalar=function(e,t,a){return Check.typeOf.object("cartesian",e),Check.typeOf.number("scalar",t),Check.typeOf.object("result",a),a.x=e.x/t,a.y=e.y/t,a.z=e.z/t,a},Cartesian3.negate=function(e,t){return Check.typeOf.object("cartesian",e),Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},Cartesian3.abs=function(e,t){return Check.typeOf.object("cartesian",e),Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var lerpScratch=new Cartesian3;Cartesian3.lerp=function(e,t,a,r){return Check.typeOf.object("start",e),Check.typeOf.object("end",t),Check.typeOf.number("t",a),Check.typeOf.object("result",r),Cartesian3.multiplyByScalar(t,a,lerpScratch),r=Cartesian3.multiplyByScalar(e,1-a,r),Cartesian3.add(lerpScratch,r,r)};var angleBetweenScratch=new Cartesian3,angleBetweenScratch2=new Cartesian3;Cartesian3.angleBetween=function(e,t){Check.typeOf.object("left",e),Check.typeOf.object("right",t),Cartesian3.normalize(e,angleBetweenScratch),Cartesian3.normalize(t,angleBetweenScratch2);var a=Cartesian3.dot(angleBetweenScratch,angleBetweenScratch2),r=Cartesian3.magnitude(Cartesian3.cross(angleBetweenScratch,angleBetweenScratch2,angleBetweenScratch));return Math.atan2(r,a)};var mostOrthogonalAxisScratch=new Cartesian3;Cartesian3.mostOrthogonalAxis=function(e,t){Check.typeOf.object("cartesian",e),Check.typeOf.object("result",t);var a=Cartesian3.normalize(e,mostOrthogonalAxisScratch);return Cartesian3.abs(a,a),a.x<=a.y?a.x<=a.z?Cartesian3.clone(Cartesian3.UNIT_X,t):Cartesian3.clone(Cartesian3.UNIT_Z,t):a.y<=a.z?Cartesian3.clone(Cartesian3.UNIT_Y,t):Cartesian3.clone(Cartesian3.UNIT_Z,t)},Cartesian3.projectVector=function(e,t,a){Check.defined("a",e),Check.defined("b",t),Check.defined("result",a);var r=Cartesian3.dot(e,t)/Cartesian3.dot(t,t);return Cartesian3.multiplyByScalar(t,r,a)},Cartesian3.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},Cartesian3.equalsArray=function(e,t,a){return e.x===t[a]&&e.y===t[a+1]&&e.z===t[a+2]},Cartesian3.equalsEpsilon=function(e,t,a,r){return e===t||defined(e)&&defined(t)&&CesiumMath.equalsEpsilon(e.x,t.x,a,r)&&CesiumMath.equalsEpsilon(e.y,t.y,a,r)&&CesiumMath.equalsEpsilon(e.z,t.z,a,r)},Cartesian3.cross=function(e,t,a){Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a);var r=e.x,n=e.y,i=e.z,c=t.x,s=t.y,o=t.z,h=n*o-i*s,f=i*c-r*o,u=r*s-n*c;return a.x=h,a.y=f,a.z=u,a},Cartesian3.midpoint=function(e,t,a){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",a),a.x=.5*(e.x+t.x),a.y=.5*(e.y+t.y),a.z=.5*(e.z+t.z),a},Cartesian3.fromDegrees=function(e,t,a,r,n){return Check.typeOf.number("longitude",e),Check.typeOf.number("latitude",t),e=CesiumMath.toRadians(e),t=CesiumMath.toRadians(t),Cartesian3.fromRadians(e,t,a,r,n)};var scratchN=new Cartesian3,scratchK=new Cartesian3,wgs84RadiiSquared=new Cartesian3(40680631590769,40680631590769,40408299984661.445);Cartesian3.fromRadians=function(e,t,a,r,n){Check.typeOf.number("longitude",e),Check.typeOf.number("latitude",t),a=defaultValue(a,0);var i=defined(r)?r.radiiSquared:wgs84RadiiSquared,c=Math.cos(t);scratchN.x=c*Math.cos(e),scratchN.y=c*Math.sin(e),scratchN.z=Math.sin(t),scratchN=Cartesian3.normalize(scratchN,scratchN),Cartesian3.multiplyComponents(i,scratchN,scratchK);var s=Math.sqrt(Cartesian3.dot(scratchN,scratchK));return scratchK=Cartesian3.divideByScalar(scratchK,s,scratchK),scratchN=Cartesian3.multiplyByScalar(scratchN,a,scratchN),defined(n)||(n=new Cartesian3),Cartesian3.add(scratchK,scratchN,n)},Cartesian3.fromDegreesArray=function(e,t,a){if(Check.defined("coordinates",e),e.length<2||e.length%2!=0)throw new DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");var r=e.length;defined(a)?a.length=r/2:a=new Array(r/2);for(var n=0;n<r;n+=2){var i=e[n],c=e[n+1],s=n/2;a[s]=Cartesian3.fromDegrees(i,c,0,t,a[s])}return a},Cartesian3.fromRadiansArray=function(e,t,a){if(Check.defined("coordinates",e),e.length<2||e.length%2!=0)throw new DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");var r=e.length;defined(a)?a.length=r/2:a=new Array(r/2);for(var n=0;n<r;n+=2){var i=e[n],c=e[n+1],s=n/2;a[s]=Cartesian3.fromRadians(i,c,0,t,a[s])}return a},Cartesian3.fromDegreesArrayHeights=function(e,t,a){if(Check.defined("coordinates",e),e.length<3||e.length%3!=0)throw new DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");var r=e.length;defined(a)?a.length=r/3:a=new Array(r/3);for(var n=0;n<r;n+=3){var i=e[n],c=e[n+1],s=e[n+2],o=n/3;a[o]=Cartesian3.fromDegrees(i,c,s,t,a[o])}return a},Cartesian3.fromRadiansArrayHeights=function(e,t,a){if(Check.defined("coordinates",e),e.length<3||e.length%3!=0)throw new DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");var r=e.length;defined(a)?a.length=r/3:a=new Array(r/3);for(var n=0;n<r;n+=3){var i=e[n],c=e[n+1],s=e[n+2],o=n/3;a[o]=Cartesian3.fromRadians(i,c,s,t,a[o])}return a},Cartesian3.ZERO=Object.freeze(new Cartesian3(0,0,0)),Cartesian3.ONE=Object.freeze(new Cartesian3(1,1,1)),Cartesian3.UNIT_X=Object.freeze(new Cartesian3(1,0,0)),Cartesian3.UNIT_Y=Object.freeze(new Cartesian3(0,1,0)),Cartesian3.UNIT_Z=Object.freeze(new Cartesian3(0,0,1)),Cartesian3.prototype.clone=function(e){return Cartesian3.clone(this,e)},Cartesian3.prototype.equals=function(e){return Cartesian3.equals(this,e)},Cartesian3.prototype.equalsEpsilon=function(e,t,a){return Cartesian3.equalsEpsilon(this,e,t,a)},Cartesian3.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};export default Cartesian3;