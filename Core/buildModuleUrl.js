import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import getAbsoluteUri from"./getAbsoluteUri.js";import Resource from"./Resource.js";var a,baseResource,implementation,cesiumScriptRegex=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function getBaseUrlFromCesiumScript(){for(var e=document.getElementsByTagName("script"),r=0,l=e.length;r<l;++r){var u=e[r].getAttribute("src"),i=cesiumScriptRegex.exec(u);if(null!==i)return i[1]}}function tryMakeAbsolute(e){return"undefined"==typeof document?e:(defined(a)||(a=document.createElement("a")),a.href=e,a.href=a.href,a.href)}function getCesiumBaseUrl(){if(defined(baseResource))return baseResource;var e;if(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&defined(define.amd)&&!define.amd.toUrlUndefined&&defined(require.toUrl)?getAbsoluteUri("..",buildModuleUrl("Core/buildModuleUrl.js")):getBaseUrlFromCesiumScript(),!defined(e))throw new DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(baseResource=new Resource({url:tryMakeAbsolute(e)})).appendForwardSlash(),baseResource}function buildModuleUrlFromRequireToUrl(e){return tryMakeAbsolute(require.toUrl("../"+e))}function buildModuleUrlFromBaseUrl(e){return getCesiumBaseUrl().getDerivedResource({url:e}).url}function buildModuleUrl(e){return defined(implementation)||(implementation="object"==typeof define&&defined(define.amd)&&!define.amd.toUrlUndefined&&defined(require.toUrl)?buildModuleUrlFromRequireToUrl:buildModuleUrlFromBaseUrl),implementation(e)}buildModuleUrl._cesiumScriptRegex=cesiumScriptRegex,buildModuleUrl._buildModuleUrlFromBaseUrl=buildModuleUrlFromBaseUrl,buildModuleUrl._clearBaseResource=function(){baseResource=void 0},buildModuleUrl.setBaseUrl=function(e){baseResource=Resource.DEFAULT.getDerivedResource({url:e})},buildModuleUrl.getCesiumBaseUrl=getCesiumBaseUrl;export default buildModuleUrl;