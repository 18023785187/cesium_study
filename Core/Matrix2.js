import Cartesian2 from"./Cartesian2.js";import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";function Matrix2(e,t,r,a){this[0]=defaultValue(e,0),this[1]=defaultValue(r,0),this[2]=defaultValue(t,0),this[3]=defaultValue(a,0)}Matrix2.packedLength=4,Matrix2.pack=function(e,t,r){return Check.typeOf.object("value",e),Check.defined("array",t),r=defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t},Matrix2.unpack=function(e,t,r){return Check.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Matrix2),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r},Matrix2.clone=function(e,t){if(defined(e))return defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new Matrix2(e[0],e[2],e[1],e[3])},Matrix2.fromArray=function(e,t,r){return Check.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Matrix2),r[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r},Matrix2.fromColumnMajorArray=function(e,t){return Check.defined("values",e),Matrix2.clone(e,t)},Matrix2.fromRowMajorArray=function(e,t){return Check.defined("values",e),defined(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new Matrix2(e[0],e[1],e[2],e[3])},Matrix2.fromScale=function(e,t){return Check.typeOf.object("scale",e),defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new Matrix2(e.x,0,0,e.y)},Matrix2.fromUniformScale=function(e,t){return Check.typeOf.number("scale",e),defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new Matrix2(e,0,0,e)},Matrix2.fromRotation=function(e,t){Check.typeOf.number("angle",e);var r=Math.cos(e),a=Math.sin(e);return defined(t)?(t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t):new Matrix2(r,-a,a,r)},Matrix2.toArray=function(e,t){return Check.typeOf.object("matrix",e),defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},Matrix2.getElementIndex=function(e,t){return Check.typeOf.number.greaterThanOrEquals("row",t,0),Check.typeOf.number.lessThanOrEquals("row",t,1),Check.typeOf.number.greaterThanOrEquals("column",e,0),Check.typeOf.number.lessThanOrEquals("column",e,1),2*e+t},Matrix2.getColumn=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,1),Check.typeOf.object("result",r);var a=2*t,n=e[a],i=e[a+1];return r.x=n,r.y=i,r},Matrix2.setColumn=function(e,t,r,a){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,1),Check.typeOf.object("cartesian",r),Check.typeOf.object("result",a);var n=2*t;return(a=Matrix2.clone(e,a))[n]=r.x,a[n+1]=r.y,a},Matrix2.getRow=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,1),Check.typeOf.object("result",r);var a=e[t],n=e[t+2];return r.x=a,r.y=n,r},Matrix2.setRow=function(e,t,r,a){return Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,1),Check.typeOf.object("cartesian",r),Check.typeOf.object("result",a),(a=Matrix2.clone(e,a))[t]=r.x,a[t+2]=r.y,a};var scratchColumn=new Cartesian2;Matrix2.getScale=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t.x=Cartesian2.magnitude(Cartesian2.fromElements(e[0],e[1],scratchColumn)),t.y=Cartesian2.magnitude(Cartesian2.fromElements(e[2],e[3],scratchColumn)),t};var scratchScale=new Cartesian2;Matrix2.getMaximumScale=function(e){return Matrix2.getScale(e,scratchScale),Cartesian2.maximumComponent(scratchScale)},Matrix2.multiply=function(e,t,r){Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r);var a=e[0]*t[0]+e[2]*t[1],n=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],c=e[1]*t[2]+e[3]*t[3];return r[0]=a,r[1]=i,r[2]=n,r[3]=c,r},Matrix2.add=function(e,t,r){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},Matrix2.subtract=function(e,t,r){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r},Matrix2.multiplyByVector=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("cartesian",t),Check.typeOf.object("result",r);var a=e[0]*t.x+e[2]*t.y,n=e[1]*t.x+e[3]*t.y;return r.x=a,r.y=n,r},Matrix2.multiplyByScalar=function(e,t,r){return Check.typeOf.object("matrix",e),Check.typeOf.number("scalar",t),Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r},Matrix2.multiplyByScale=function(e,t,r){return Check.typeOf.object("matrix",e),Check.typeOf.object("scale",t),Check.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.y,r[3]=e[3]*t.y,r},Matrix2.negate=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},Matrix2.transpose=function(e,t){Check.typeOf.object("matrix",e),Check.typeOf.object("result",t);var r=e[0],a=e[2],n=e[1],i=e[3];return t[0]=r,t[1]=a,t[2]=n,t[3]=i,t},Matrix2.abs=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},Matrix2.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},Matrix2.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]},Matrix2.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r},Matrix2.IDENTITY=Object.freeze(new Matrix2(1,0,0,1)),Matrix2.ZERO=Object.freeze(new Matrix2(0,0,0,0)),Matrix2.COLUMN0ROW0=0,Matrix2.COLUMN0ROW1=1,Matrix2.COLUMN1ROW0=2,Matrix2.COLUMN1ROW1=3,Object.defineProperties(Matrix2.prototype,{length:{get:function(){return Matrix2.packedLength}}}),Matrix2.prototype.clone=function(e){return Matrix2.clone(this,e)},Matrix2.prototype.equals=function(e){return Matrix2.equals(this,e)},Matrix2.prototype.equalsEpsilon=function(e,t){return Matrix2.equalsEpsilon(this,e,t)},Matrix2.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};export default Matrix2;