import Cartesian3 from"./Cartesian3.js";import Cartesian4 from"./Cartesian4.js";import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import CesiumMath from"./Math.js";import Matrix3 from"./Matrix3.js";import RuntimeError from"./RuntimeError.js";function Matrix4(e,t,r,a,n,i,c,o,u,f,s,h,l,C,m,p){this[0]=defaultValue(e,0),this[1]=defaultValue(n,0),this[2]=defaultValue(u,0),this[3]=defaultValue(l,0),this[4]=defaultValue(t,0),this[5]=defaultValue(i,0),this[6]=defaultValue(f,0),this[7]=defaultValue(C,0),this[8]=defaultValue(r,0),this[9]=defaultValue(c,0),this[10]=defaultValue(s,0),this[11]=defaultValue(m,0),this[12]=defaultValue(a,0),this[13]=defaultValue(o,0),this[14]=defaultValue(h,0),this[15]=defaultValue(p,0)}Matrix4.packedLength=16,Matrix4.pack=function(e,t,r){return Check.typeOf.object("value",e),Check.defined("array",t),r=defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},Matrix4.unpack=function(e,t,r){return Check.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Matrix4),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},Matrix4.clone=function(e,t){if(defined(e))return defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},Matrix4.fromArray=Matrix4.unpack,Matrix4.fromColumnMajorArray=function(e,t){return Check.defined("values",e),Matrix4.clone(e,t)},Matrix4.fromRowMajorArray=function(e,t){return Check.defined("values",e),defined(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new Matrix4(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},Matrix4.fromRotationTranslation=function(e,t,r){return Check.typeOf.object("rotation",e),t=defaultValue(t,Cartesian3.ZERO),defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new Matrix4(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},Matrix4.fromTranslationQuaternionRotationScale=function(e,t,r,a){Check.typeOf.object("translation",e),Check.typeOf.object("rotation",t),Check.typeOf.object("scale",r),defined(a)||(a=new Matrix4);var n=r.x,i=r.y,c=r.z,o=t.x*t.x,u=t.x*t.y,f=t.x*t.z,s=t.x*t.w,h=t.y*t.y,l=t.y*t.z,C=t.y*t.w,m=t.z*t.z,p=t.z*t.w,x=t.w*t.w,y=o-h-m+x,O=2*(u-p),M=2*(f+C),b=2*(u+p),k=-o+h-m+x,d=2*(l-s),j=2*(f-C),w=2*(l+s),v=-o-h+m+x;return a[0]=y*n,a[1]=b*n,a[2]=j*n,a[3]=0,a[4]=O*i,a[5]=k*i,a[6]=w*i,a[7]=0,a[8]=M*c,a[9]=d*c,a[10]=v*c,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,a},Matrix4.fromTranslationRotationScale=function(e,t){return Check.typeOf.object("translationRotationScale",e),Matrix4.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},Matrix4.fromTranslation=function(e,t){return Check.typeOf.object("translation",e),Matrix4.fromRotationTranslation(Matrix3.IDENTITY,e,t)},Matrix4.fromScale=function(e,t){return Check.typeOf.object("scale",e),defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Matrix4(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},Matrix4.fromUniformScale=function(e,t){return Check.typeOf.number("scale",e),defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Matrix4(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var fromCameraF=new Cartesian3,fromCameraR=new Cartesian3,fromCameraU=new Cartesian3;Matrix4.fromCamera=function(e,t){Check.typeOf.object("camera",e);var r=e.position,a=e.direction,n=e.up;Check.typeOf.object("camera.position",r),Check.typeOf.object("camera.direction",a),Check.typeOf.object("camera.up",n),Cartesian3.normalize(a,fromCameraF),Cartesian3.normalize(Cartesian3.cross(fromCameraF,n,fromCameraR),fromCameraR),Cartesian3.normalize(Cartesian3.cross(fromCameraR,fromCameraF,fromCameraU),fromCameraU);var i=fromCameraR.x,c=fromCameraR.y,o=fromCameraR.z,u=fromCameraF.x,f=fromCameraF.y,s=fromCameraF.z,h=fromCameraU.x,l=fromCameraU.y,C=fromCameraU.z,m=r.x,p=r.y,x=r.z,y=i*-m+c*-p+o*-x,O=h*-m+l*-p+C*-x,M=u*m+f*p+s*x;return defined(t)?(t[0]=i,t[1]=h,t[2]=-u,t[3]=0,t[4]=c,t[5]=l,t[6]=-f,t[7]=0,t[8]=o,t[9]=C,t[10]=-s,t[11]=0,t[12]=y,t[13]=O,t[14]=M,t[15]=1,t):new Matrix4(i,c,o,y,h,l,C,O,-u,-f,-s,M,0,0,0,1)},Matrix4.computePerspectiveFieldOfView=function(e,t,r,a,n){Check.typeOf.number.greaterThan("fovY",e,0),Check.typeOf.number.lessThan("fovY",e,Math.PI),Check.typeOf.number.greaterThan("near",r,0),Check.typeOf.number.greaterThan("far",a,0),Check.typeOf.object("result",n);var i=1/Math.tan(.5*e),c=i/t,o=(a+r)/(r-a),u=2*a*r/(r-a);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=o,n[11]=-1,n[12]=0,n[13]=0,n[14]=u,n[15]=0,n},Matrix4.computeOrthographicOffCenter=function(e,t,r,a,n,i,c){Check.typeOf.number("left",e),Check.typeOf.number("right",t),Check.typeOf.number("bottom",r),Check.typeOf.number("top",a),Check.typeOf.number("near",n),Check.typeOf.number("far",i),Check.typeOf.object("result",c);var o=1/(t-e),u=1/(a-r),f=1/(i-n),s=-(t+e)*o,h=-(a+r)*u,l=-(i+n)*f;return o*=2,u*=2,f*=-2,c[0]=o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=u,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=f,c[11]=0,c[12]=s,c[13]=h,c[14]=l,c[15]=1,c},Matrix4.computePerspectiveOffCenter=function(e,t,r,a,n,i,c){Check.typeOf.number("left",e),Check.typeOf.number("right",t),Check.typeOf.number("bottom",r),Check.typeOf.number("top",a),Check.typeOf.number("near",n),Check.typeOf.number("far",i),Check.typeOf.object("result",c);var o=2*n/(t-e),u=2*n/(a-r),f=(t+e)/(t-e),s=(a+r)/(a-r),h=-(i+n)/(i-n),l=-2*i*n/(i-n);return c[0]=o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=u,c[6]=0,c[7]=0,c[8]=f,c[9]=s,c[10]=h,c[11]=-1,c[12]=0,c[13]=0,c[14]=l,c[15]=0,c},Matrix4.computeInfinitePerspectiveOffCenter=function(e,t,r,a,n,i){Check.typeOf.number("left",e),Check.typeOf.number("right",t),Check.typeOf.number("bottom",r),Check.typeOf.number("top",a),Check.typeOf.number("near",n),Check.typeOf.object("result",i);var c=2*n/(t-e),o=2*n/(a-r),u=(t+e)/(t-e),f=(a+r)/(a-r),s=-2*n;return i[0]=c,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=u,i[9]=f,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=s,i[15]=0,i},Matrix4.computeViewportTransformation=function(e,t,r,a){defined(a)||(a=new Matrix4),e=defaultValue(e,defaultValue.EMPTY_OBJECT);var n=defaultValue(e.x,0),i=defaultValue(e.y,0),c=defaultValue(e.width,0),o=defaultValue(e.height,0);t=defaultValue(t,0);var u=.5*c,f=.5*o,s=.5*((r=defaultValue(r,1))-t),h=u,l=f,C=s,m=n+u,p=i+f,x=t+s;return a[0]=h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=C,a[11]=0,a[12]=m,a[13]=p,a[14]=x,a[15]=1,a},Matrix4.computeView=function(e,t,r,a,n){return Check.typeOf.object("position",e),Check.typeOf.object("direction",t),Check.typeOf.object("up",r),Check.typeOf.object("right",a),Check.typeOf.object("result",n),n[0]=a.x,n[1]=r.x,n[2]=-t.x,n[3]=0,n[4]=a.y,n[5]=r.y,n[6]=-t.y,n[7]=0,n[8]=a.z,n[9]=r.z,n[10]=-t.z,n[11]=0,n[12]=-Cartesian3.dot(a,e),n[13]=-Cartesian3.dot(r,e),n[14]=Cartesian3.dot(t,e),n[15]=1,n},Matrix4.toArray=function(e,t){return Check.typeOf.object("matrix",e),defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},Matrix4.getElementIndex=function(e,t){return Check.typeOf.number.greaterThanOrEquals("row",t,0),Check.typeOf.number.lessThanOrEquals("row",t,3),Check.typeOf.number.greaterThanOrEquals("column",e,0),Check.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},Matrix4.getColumn=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,3),Check.typeOf.object("result",r);var a=4*t,n=e[a],i=e[a+1],c=e[a+2],o=e[a+3];return r.x=n,r.y=i,r.z=c,r.w=o,r},Matrix4.setColumn=function(e,t,r,a){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,3),Check.typeOf.object("cartesian",r),Check.typeOf.object("result",a);var n=4*t;return(a=Matrix4.clone(e,a))[n]=r.x,a[n+1]=r.y,a[n+2]=r.z,a[n+3]=r.w,a},Matrix4.setTranslation=function(e,t,r){return Check.typeOf.object("matrix",e),Check.typeOf.object("translation",t),Check.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var scaleScratch=new Cartesian3;Matrix4.setScale=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("scale",t),Check.typeOf.object("result",r);var a=Matrix4.getScale(e,scaleScratch),n=Cartesian3.divideComponents(t,a,scaleScratch);return Matrix4.multiplyByScale(e,n,r)},Matrix4.getRow=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,3),Check.typeOf.object("result",r);var a=e[t],n=e[t+4],i=e[t+8],c=e[t+12];return r.x=a,r.y=n,r.z=i,r.w=c,r},Matrix4.setRow=function(e,t,r,a){return Check.typeOf.object("matrix",e),Check.typeOf.number.greaterThanOrEquals("index",t,0),Check.typeOf.number.lessThanOrEquals("index",t,3),Check.typeOf.object("cartesian",r),Check.typeOf.object("result",a),(a=Matrix4.clone(e,a))[t]=r.x,a[t+4]=r.y,a[t+8]=r.z,a[t+12]=r.w,a};var scratchColumn=new Cartesian3;Matrix4.getScale=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t.x=Cartesian3.magnitude(Cartesian3.fromElements(e[0],e[1],e[2],scratchColumn)),t.y=Cartesian3.magnitude(Cartesian3.fromElements(e[4],e[5],e[6],scratchColumn)),t.z=Cartesian3.magnitude(Cartesian3.fromElements(e[8],e[9],e[10],scratchColumn)),t};var scratchScale=new Cartesian3;Matrix4.getMaximumScale=function(e){return Matrix4.getScale(e,scratchScale),Cartesian3.maximumComponent(scratchScale)},Matrix4.multiply=function(e,t,r){Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r);var a=e[0],n=e[1],i=e[2],c=e[3],o=e[4],u=e[5],f=e[6],s=e[7],h=e[8],l=e[9],C=e[10],m=e[11],p=e[12],x=e[13],y=e[14],O=e[15],M=t[0],b=t[1],k=t[2],d=t[3],j=t[4],w=t[5],v=t[6],R=t[7],z=t[8],g=t[9],T=t[10],S=t[11],V=t[12],E=t[13],U=t[14],q=t[15],L=a*M+o*b+h*k+p*d,N=n*M+u*b+l*k+x*d,W=i*M+f*b+C*k+y*d,B=c*M+s*b+m*k+O*d,I=a*j+o*w+h*v+p*R,P=n*j+u*w+l*v+x*R,F=i*j+f*w+C*v+y*R,A=c*j+s*w+m*v+O*R,Y=a*z+o*g+h*T+p*S,Z=n*z+u*g+l*T+x*S,D=i*z+f*g+C*T+y*S,Q=c*z+s*g+m*T+O*S,J=a*V+o*E+h*U+p*q,_=n*V+u*E+l*U+x*q,G=i*V+f*E+C*U+y*q,H=c*V+s*E+m*U+O*q;return r[0]=L,r[1]=N,r[2]=W,r[3]=B,r[4]=I,r[5]=P,r[6]=F,r[7]=A,r[8]=Y,r[9]=Z,r[10]=D,r[11]=Q,r[12]=J,r[13]=_,r[14]=G,r[15]=H,r},Matrix4.add=function(e,t,r){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},Matrix4.subtract=function(e,t,r){return Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},Matrix4.multiplyTransformation=function(e,t,r){Check.typeOf.object("left",e),Check.typeOf.object("right",t),Check.typeOf.object("result",r);var a=e[0],n=e[1],i=e[2],c=e[4],o=e[5],u=e[6],f=e[8],s=e[9],h=e[10],l=e[12],C=e[13],m=e[14],p=t[0],x=t[1],y=t[2],O=t[4],M=t[5],b=t[6],k=t[8],d=t[9],j=t[10],w=t[12],v=t[13],R=t[14],z=a*p+c*x+f*y,g=n*p+o*x+s*y,T=i*p+u*x+h*y,S=a*O+c*M+f*b,V=n*O+o*M+s*b,E=i*O+u*M+h*b,U=a*k+c*d+f*j,q=n*k+o*d+s*j,L=i*k+u*d+h*j,N=a*w+c*v+f*R+l,W=n*w+o*v+s*R+C,B=i*w+u*v+h*R+m;return r[0]=z,r[1]=g,r[2]=T,r[3]=0,r[4]=S,r[5]=V,r[6]=E,r[7]=0,r[8]=U,r[9]=q,r[10]=L,r[11]=0,r[12]=N,r[13]=W,r[14]=B,r[15]=1,r},Matrix4.multiplyByMatrix3=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("rotation",t),Check.typeOf.object("result",r);var a=e[0],n=e[1],i=e[2],c=e[4],o=e[5],u=e[6],f=e[8],s=e[9],h=e[10],l=t[0],C=t[1],m=t[2],p=t[3],x=t[4],y=t[5],O=t[6],M=t[7],b=t[8],k=a*l+c*C+f*m,d=n*l+o*C+s*m,j=i*l+u*C+h*m,w=a*p+c*x+f*y,v=n*p+o*x+s*y,R=i*p+u*x+h*y,z=a*O+c*M+f*b,g=n*O+o*M+s*b,T=i*O+u*M+h*b;return r[0]=k,r[1]=d,r[2]=j,r[3]=0,r[4]=w,r[5]=v,r[6]=R,r[7]=0,r[8]=z,r[9]=g,r[10]=T,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},Matrix4.multiplyByTranslation=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("translation",t),Check.typeOf.object("result",r);var a=t.x,n=t.y,i=t.z,c=a*e[0]+n*e[4]+i*e[8]+e[12],o=a*e[1]+n*e[5]+i*e[9]+e[13],u=a*e[2]+n*e[6]+i*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=c,r[13]=o,r[14]=u,r[15]=e[15],r};var uniformScaleScratch=new Cartesian3;Matrix4.multiplyByUniformScale=function(e,t,r){return Check.typeOf.object("matrix",e),Check.typeOf.number("scale",t),Check.typeOf.object("result",r),uniformScaleScratch.x=t,uniformScaleScratch.y=t,uniformScaleScratch.z=t,Matrix4.multiplyByScale(e,uniformScaleScratch,r)},Matrix4.multiplyByScale=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("scale",t),Check.typeOf.object("result",r);var a=t.x,n=t.y,i=t.z;return 1===a&&1===n&&1===i?Matrix4.clone(e,r):(r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=0,r[4]=n*e[4],r[5]=n*e[5],r[6]=n*e[6],r[7]=0,r[8]=i*e[8],r[9]=i*e[9],r[10]=i*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},Matrix4.multiplyByVector=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("cartesian",t),Check.typeOf.object("result",r);var a=t.x,n=t.y,i=t.z,c=t.w,o=e[0]*a+e[4]*n+e[8]*i+e[12]*c,u=e[1]*a+e[5]*n+e[9]*i+e[13]*c,f=e[2]*a+e[6]*n+e[10]*i+e[14]*c,s=e[3]*a+e[7]*n+e[11]*i+e[15]*c;return r.x=o,r.y=u,r.z=f,r.w=s,r},Matrix4.multiplyByPointAsVector=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("cartesian",t),Check.typeOf.object("result",r);var a=t.x,n=t.y,i=t.z,c=e[0]*a+e[4]*n+e[8]*i,o=e[1]*a+e[5]*n+e[9]*i,u=e[2]*a+e[6]*n+e[10]*i;return r.x=c,r.y=o,r.z=u,r},Matrix4.multiplyByPoint=function(e,t,r){Check.typeOf.object("matrix",e),Check.typeOf.object("cartesian",t),Check.typeOf.object("result",r);var a=t.x,n=t.y,i=t.z,c=e[0]*a+e[4]*n+e[8]*i+e[12],o=e[1]*a+e[5]*n+e[9]*i+e[13],u=e[2]*a+e[6]*n+e[10]*i+e[14];return r.x=c,r.y=o,r.z=u,r},Matrix4.multiplyByScalar=function(e,t,r){return Check.typeOf.object("matrix",e),Check.typeOf.number("scalar",t),Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},Matrix4.negate=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},Matrix4.transpose=function(e,t){Check.typeOf.object("matrix",e),Check.typeOf.object("result",t);var r=e[1],a=e[2],n=e[3],i=e[6],c=e[7],o=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=n,t[13]=c,t[14]=o,t[15]=e[15],t},Matrix4.abs=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},Matrix4.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},Matrix4.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},Matrix4.getTranslation=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},Matrix4.getMatrix3=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var scratchInverseRotation=new Matrix3,scratchMatrix3Zero=new Matrix3,scratchBottomRow=new Cartesian4,scratchExpectedBottomRow=new Cartesian4(0,0,0,1);Matrix4.inverse=function(e,t){Check.typeOf.object("matrix",e),Check.typeOf.object("result",t);var r=e[0],a=e[4],n=e[8],i=e[12],c=e[1],o=e[5],u=e[9],f=e[13],s=e[2],h=e[6],l=e[10],C=e[14],m=e[3],p=e[7],x=e[11],y=e[15],O=l*y,M=C*x,b=h*y,k=C*p,d=h*x,j=l*p,w=s*y,v=C*m,R=s*x,z=l*m,g=s*p,T=h*m,S=O*o+k*u+d*f-(M*o+b*u+j*f),V=M*c+w*u+z*f-(O*c+v*u+R*f),E=b*c+v*o+g*f-(k*c+w*o+T*f),U=j*c+R*o+T*u-(d*c+z*o+g*u),q=M*a+b*n+j*i-(O*a+k*n+d*i),L=O*r+v*n+R*i-(M*r+w*n+z*i),N=k*r+w*a+T*i-(b*r+v*a+g*i),W=d*r+z*a+g*n-(j*r+R*a+T*n),B=(O=n*f)*p+(k=i*o)*x+(d=a*u)*y-((M=i*u)*p+(b=a*f)*x+(j=n*o)*y),I=M*m+(w=r*f)*x+(z=n*c)*y-(O*m+(v=i*c)*x+(R=r*u)*y),P=b*m+v*p+(g=r*o)*y-(k*m+w*p+(T=a*c)*y),F=j*m+R*p+T*x-(d*m+z*p+g*x),A=b*l+j*C+M*h-(d*C+O*h+k*l),Y=R*C+O*s+v*l-(w*l+z*C+M*s),Z=w*h+T*C+k*s-(g*C+b*s+v*h),D=g*l+d*s+z*h-(R*h+T*l+j*s),Q=r*S+a*V+n*E+i*U;if(Math.abs(Q)<CesiumMath.EPSILON21){if(Matrix3.equalsEpsilon(Matrix4.getMatrix3(e,scratchInverseRotation),scratchMatrix3Zero,CesiumMath.EPSILON7)&&Cartesian4.equals(Matrix4.getRow(e,3,scratchBottomRow),scratchExpectedBottomRow))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new RuntimeError("matrix is not invertible because its determinate is zero.")}return Q=1/Q,t[0]=S*Q,t[1]=V*Q,t[2]=E*Q,t[3]=U*Q,t[4]=q*Q,t[5]=L*Q,t[6]=N*Q,t[7]=W*Q,t[8]=B*Q,t[9]=I*Q,t[10]=P*Q,t[11]=F*Q,t[12]=A*Q,t[13]=Y*Q,t[14]=Z*Q,t[15]=D*Q,t},Matrix4.inverseTransformation=function(e,t){Check.typeOf.object("matrix",e),Check.typeOf.object("result",t);var r=e[0],a=e[1],n=e[2],i=e[4],c=e[5],o=e[6],u=e[8],f=e[9],s=e[10],h=e[12],l=e[13],C=e[14],m=-r*h-a*l-n*C,p=-i*h-c*l-o*C,x=-u*h-f*l-s*C;return t[0]=r,t[1]=i,t[2]=u,t[3]=0,t[4]=a,t[5]=c,t[6]=f,t[7]=0,t[8]=n,t[9]=o,t[10]=s,t[11]=0,t[12]=m,t[13]=p,t[14]=x,t[15]=1,t};var scratchTransposeMatrix=new Matrix4;Matrix4.inverseTranspose=function(e,t){return Check.typeOf.object("matrix",e),Check.typeOf.object("result",t),Matrix4.inverse(Matrix4.transpose(e,scratchTransposeMatrix),t)},Matrix4.IDENTITY=Object.freeze(new Matrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Matrix4.ZERO=Object.freeze(new Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Matrix4.COLUMN0ROW0=0,Matrix4.COLUMN0ROW1=1,Matrix4.COLUMN0ROW2=2,Matrix4.COLUMN0ROW3=3,Matrix4.COLUMN1ROW0=4,Matrix4.COLUMN1ROW1=5,Matrix4.COLUMN1ROW2=6,Matrix4.COLUMN1ROW3=7,Matrix4.COLUMN2ROW0=8,Matrix4.COLUMN2ROW1=9,Matrix4.COLUMN2ROW2=10,Matrix4.COLUMN2ROW3=11,Matrix4.COLUMN3ROW0=12,Matrix4.COLUMN3ROW1=13,Matrix4.COLUMN3ROW2=14,Matrix4.COLUMN3ROW3=15,Object.defineProperties(Matrix4.prototype,{length:{get:function(){return Matrix4.packedLength}}}),Matrix4.prototype.clone=function(e){return Matrix4.clone(this,e)},Matrix4.prototype.equals=function(e){return Matrix4.equals(this,e)},Matrix4.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},Matrix4.prototype.equalsEpsilon=function(e,t){return Matrix4.equalsEpsilon(this,e,t)},Matrix4.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};export default Matrix4;