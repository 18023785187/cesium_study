import when from"../ThirdParty/when.js";import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import Resource from"./Resource.js";function loadImageFromTypedArray(e){var r=e.uint8Array,o=e.format,t=e.request,n=defaultValue(e.flipY,!1),i=defaultValue(e.skipColorSpaceConversion,!1);Check.typeOf.object("uint8Array",r),Check.typeOf.string("format",o);var a,u=new Blob([r],{type:o});return Resource.supportsImageBitmapOptions().then((function(e){return e?when(Resource.createImageBitmapFromBlob(u,{flipY:n,premultiplyAlpha:!1,skipColorSpaceConversion:i})):(a=window.URL.createObjectURL(u),new Resource({url:a,request:t}).fetchImage({flipY:n,skipColorSpaceConversion:i}))})).then((function(e){return defined(a)&&window.URL.revokeObjectURL(a),e})).otherwise((function(e){return defined(a)&&window.URL.revokeObjectURL(a),when.reject(e)}))}export default loadImageFromTypedArray;