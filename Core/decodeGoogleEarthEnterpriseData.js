import Check from"./Check.js";import RuntimeError from"./RuntimeError.js";var compressedMagic=1953029805,compressedMagicSwap=2917034100;function decodeGoogleEarthEnterpriseData(e,t){if(decodeGoogleEarthEnterpriseData.passThroughDataForTesting)return t;Check.typeOf.object("key",e),Check.typeOf.object("data",t);var r=e.byteLength;if(0===r||r%4!=0)throw new RuntimeError("The length of key must be greater than 0 and a multiple of 4.");var a=new DataView(t),o=a.getUint32(0,!0);if(o===compressedMagic||o===compressedMagicSwap)return t;for(var i,n=new DataView(e),s=0,g=t.byteLength,c=g-g%8,h=r,p=8;s<c;)for(i=p=(p+8)%24;s<c&&i<h;)a.setUint32(s,a.getUint32(s,!0)^n.getUint32(i,!0),!0),a.setUint32(s+4,a.getUint32(s+4,!0)^n.getUint32(i+4,!0),!0),s+=8,i+=24;if(s<g)for(i>=h&&(i=p=(p+8)%24);s<g;)a.setUint8(s,a.getUint8(s)^n.getUint8(i)),s++,i++}decodeGoogleEarthEnterpriseData.passThroughDataForTesting=!1;export default decodeGoogleEarthEnterpriseData;