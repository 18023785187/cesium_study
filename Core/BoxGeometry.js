import arrayFill from"./arrayFill.js";import BoundingSphere from"./BoundingSphere.js";import Cartesian3 from"./Cartesian3.js";import Check from"./Check.js";import ComponentDatatype from"./ComponentDatatype.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import Geometry from"./Geometry.js";import GeometryAttribute from"./GeometryAttribute.js";import GeometryAttributes from"./GeometryAttributes.js";import GeometryOffsetAttribute from"./GeometryOffsetAttribute.js";import PrimitiveType from"./PrimitiveType.js";import VertexFormat from"./VertexFormat.js";var diffScratch=new Cartesian3;function BoxGeometry(e){var t=(e=defaultValue(e,defaultValue.EMPTY_OBJECT)).minimum,r=e.maximum;if(Check.typeOf.object("min",t),Check.typeOf.object("max",r),defined(e.offsetAttribute)&&e.offsetAttribute===GeometryOffsetAttribute.TOP)throw new DeveloperError("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");var a=defaultValue(e.vertexFormat,VertexFormat.DEFAULT);this._minimum=Cartesian3.clone(t),this._maximum=Cartesian3.clone(r),this._vertexFormat=a,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}BoxGeometry.fromDimensions=function(e){var t=(e=defaultValue(e,defaultValue.EMPTY_OBJECT)).dimensions;Check.typeOf.object("dimensions",t),Check.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),Check.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),Check.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);var r=Cartesian3.multiplyByScalar(t,.5,new Cartesian3);return new BoxGeometry({minimum:Cartesian3.negate(r,new Cartesian3),maximum:r,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},BoxGeometry.fromAxisAlignedBoundingBox=function(e){return Check.typeOf.object("boundingBox",e),new BoxGeometry({minimum:e.minimum,maximum:e.maximum})},BoxGeometry.packedLength=2*Cartesian3.packedLength+VertexFormat.packedLength+1,BoxGeometry.pack=function(e,t,r){return Check.typeOf.object("value",e),Check.defined("array",t),r=defaultValue(r,0),Cartesian3.pack(e._minimum,t,r),Cartesian3.pack(e._maximum,t,r+Cartesian3.packedLength),VertexFormat.pack(e._vertexFormat,t,r+2*Cartesian3.packedLength),t[r+2*Cartesian3.packedLength+VertexFormat.packedLength]=defaultValue(e._offsetAttribute,-1),t};var unitBoxGeometry,scratchMin=new Cartesian3,scratchMax=new Cartesian3,scratchVertexFormat=new VertexFormat,scratchOptions={minimum:scratchMin,maximum:scratchMax,vertexFormat:scratchVertexFormat,offsetAttribute:void 0};BoxGeometry.unpack=function(e,t,r){Check.defined("array",e),t=defaultValue(t,0);var a=Cartesian3.unpack(e,t,scratchMin),o=Cartesian3.unpack(e,t+Cartesian3.packedLength,scratchMax),n=VertexFormat.unpack(e,t+2*Cartesian3.packedLength,scratchVertexFormat),i=e[t+2*Cartesian3.packedLength+VertexFormat.packedLength];return defined(r)?(r._minimum=Cartesian3.clone(a,r._minimum),r._maximum=Cartesian3.clone(o,r._maximum),r._vertexFormat=VertexFormat.clone(n,r._vertexFormat),r._offsetAttribute=-1===i?void 0:i,r):(scratchOptions.offsetAttribute=-1===i?void 0:i,new BoxGeometry(scratchOptions))},BoxGeometry.createGeometry=function(e){var t=e._minimum,r=e._maximum,a=e._vertexFormat;if(!Cartesian3.equals(t,r)){var o,n,i=new GeometryAttributes;if(a.position&&(a.st||a.normal||a.tangent||a.bitangent)){if(a.position&&((n=new Float64Array(72))[0]=t.x,n[1]=t.y,n[2]=r.z,n[3]=r.x,n[4]=t.y,n[5]=r.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n[9]=t.x,n[10]=r.y,n[11]=r.z,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=r.x,n[16]=t.y,n[17]=t.z,n[18]=r.x,n[19]=r.y,n[20]=t.z,n[21]=t.x,n[22]=r.y,n[23]=t.z,n[24]=r.x,n[25]=t.y,n[26]=t.z,n[27]=r.x,n[28]=r.y,n[29]=t.z,n[30]=r.x,n[31]=r.y,n[32]=r.z,n[33]=r.x,n[34]=t.y,n[35]=r.z,n[36]=t.x,n[37]=t.y,n[38]=t.z,n[39]=t.x,n[40]=r.y,n[41]=t.z,n[42]=t.x,n[43]=r.y,n[44]=r.z,n[45]=t.x,n[46]=t.y,n[47]=r.z,n[48]=t.x,n[49]=r.y,n[50]=t.z,n[51]=r.x,n[52]=r.y,n[53]=t.z,n[54]=r.x,n[55]=r.y,n[56]=r.z,n[57]=t.x,n[58]=r.y,n[59]=r.z,n[60]=t.x,n[61]=t.y,n[62]=t.z,n[63]=r.x,n[64]=t.y,n[65]=t.z,n[66]=r.x,n[67]=t.y,n[68]=r.z,n[69]=t.x,n[70]=t.y,n[71]=r.z,i.position=new GeometryAttribute({componentDatatype:ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:n})),a.normal){var m=new Float32Array(72);m[0]=0,m[1]=0,m[2]=1,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=1,m[9]=0,m[10]=0,m[11]=1,m[12]=0,m[13]=0,m[14]=-1,m[15]=0,m[16]=0,m[17]=-1,m[18]=0,m[19]=0,m[20]=-1,m[21]=0,m[22]=0,m[23]=-1,m[24]=1,m[25]=0,m[26]=0,m[27]=1,m[28]=0,m[29]=0,m[30]=1,m[31]=0,m[32]=0,m[33]=1,m[34]=0,m[35]=0,m[36]=-1,m[37]=0,m[38]=0,m[39]=-1,m[40]=0,m[41]=0,m[42]=-1,m[43]=0,m[44]=0,m[45]=-1,m[46]=0,m[47]=0,m[48]=0,m[49]=1,m[50]=0,m[51]=0,m[52]=1,m[53]=0,m[54]=0,m[55]=1,m[56]=0,m[57]=0,m[58]=1,m[59]=0,m[60]=0,m[61]=-1,m[62]=0,m[63]=0,m[64]=-1,m[65]=0,m[66]=0,m[67]=-1,m[68]=0,m[69]=0,m[70]=-1,m[71]=0,i.normal=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:3,values:m})}if(a.st){var s=new Float32Array(48);s[0]=0,s[1]=0,s[2]=1,s[3]=0,s[4]=1,s[5]=1,s[6]=0,s[7]=1,s[8]=1,s[9]=0,s[10]=0,s[11]=0,s[12]=0,s[13]=1,s[14]=1,s[15]=1,s[16]=0,s[17]=0,s[18]=1,s[19]=0,s[20]=1,s[21]=1,s[22]=0,s[23]=1,s[24]=1,s[25]=0,s[26]=0,s[27]=0,s[28]=0,s[29]=1,s[30]=1,s[31]=1,s[32]=1,s[33]=0,s[34]=0,s[35]=0,s[36]=0,s[37]=1,s[38]=1,s[39]=1,s[40]=0,s[41]=0,s[42]=1,s[43]=0,s[44]=1,s[45]=1,s[46]=0,s[47]=1,i.st=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:2,values:s})}if(a.tangent){var u=new Float32Array(72);u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,u[6]=1,u[7]=0,u[8]=0,u[9]=1,u[10]=0,u[11]=0,u[12]=-1,u[13]=0,u[14]=0,u[15]=-1,u[16]=0,u[17]=0,u[18]=-1,u[19]=0,u[20]=0,u[21]=-1,u[22]=0,u[23]=0,u[24]=0,u[25]=1,u[26]=0,u[27]=0,u[28]=1,u[29]=0,u[30]=0,u[31]=1,u[32]=0,u[33]=0,u[34]=1,u[35]=0,u[36]=0,u[37]=-1,u[38]=0,u[39]=0,u[40]=-1,u[41]=0,u[42]=0,u[43]=-1,u[44]=0,u[45]=0,u[46]=-1,u[47]=0,u[48]=-1,u[49]=0,u[50]=0,u[51]=-1,u[52]=0,u[53]=0,u[54]=-1,u[55]=0,u[56]=0,u[57]=-1,u[58]=0,u[59]=0,u[60]=1,u[61]=0,u[62]=0,u[63]=1,u[64]=0,u[65]=0,u[66]=1,u[67]=0,u[68]=0,u[69]=1,u[70]=0,u[71]=0,i.tangent=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:3,values:u})}if(a.bitangent){var y=new Float32Array(72);y[0]=0,y[1]=1,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=0,y[7]=1,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=1,y[14]=0,y[15]=0,y[16]=1,y[17]=0,y[18]=0,y[19]=1,y[20]=0,y[21]=0,y[22]=1,y[23]=0,y[24]=0,y[25]=0,y[26]=1,y[27]=0,y[28]=0,y[29]=1,y[30]=0,y[31]=0,y[32]=1,y[33]=0,y[34]=0,y[35]=1,y[36]=0,y[37]=0,y[38]=1,y[39]=0,y[40]=0,y[41]=1,y[42]=0,y[43]=0,y[44]=1,y[45]=0,y[46]=0,y[47]=1,y[48]=0,y[49]=0,y[50]=1,y[51]=0,y[52]=0,y[53]=1,y[54]=0,y[55]=0,y[56]=1,y[57]=0,y[58]=0,y[59]=1,y[60]=0,y[61]=0,y[62]=1,y[63]=0,y[64]=0,y[65]=1,y[66]=0,y[67]=0,y[68]=1,y[69]=0,y[70]=0,y[71]=1,i.bitangent=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:3,values:y})}(o=new Uint16Array(36))[0]=0,o[1]=1,o[2]=2,o[3]=0,o[4]=2,o[5]=3,o[6]=6,o[7]=5,o[8]=4,o[9]=7,o[10]=6,o[11]=4,o[12]=8,o[13]=9,o[14]=10,o[15]=8,o[16]=10,o[17]=11,o[18]=14,o[19]=13,o[20]=12,o[21]=15,o[22]=14,o[23]=12,o[24]=18,o[25]=17,o[26]=16,o[27]=19,o[28]=18,o[29]=16,o[30]=20,o[31]=21,o[32]=22,o[33]=20,o[34]=22,o[35]=23}else(n=new Float64Array(24))[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=r.x,n[4]=t.y,n[5]=t.z,n[6]=r.x,n[7]=r.y,n[8]=t.z,n[9]=t.x,n[10]=r.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=r.z,n[15]=r.x,n[16]=t.y,n[17]=r.z,n[18]=r.x,n[19]=r.y,n[20]=r.z,n[21]=t.x,n[22]=r.y,n[23]=r.z,i.position=new GeometryAttribute({componentDatatype:ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:n}),(o=new Uint16Array(36))[0]=4,o[1]=5,o[2]=6,o[3]=4,o[4]=6,o[5]=7,o[6]=1,o[7]=0,o[8]=3,o[9]=1,o[10]=3,o[11]=2,o[12]=1,o[13]=6,o[14]=5,o[15]=1,o[16]=2,o[17]=6,o[18]=2,o[19]=3,o[20]=7,o[21]=2,o[22]=7,o[23]=6,o[24]=3,o[25]=0,o[26]=4,o[27]=3,o[28]=4,o[29]=7,o[30]=0,o[31]=1,o[32]=5,o[33]=0,o[34]=5,o[35]=4;var f=Cartesian3.subtract(r,t,diffScratch),p=.5*Cartesian3.magnitude(f);if(defined(e._offsetAttribute)){var c=n.length,x=new Uint8Array(c/3),l=e._offsetAttribute===GeometryOffsetAttribute.NONE?0:1;arrayFill(x,l),i.applyOffset=new GeometryAttribute({componentDatatype:ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:x})}return new Geometry({attributes:i,indices:o,primitiveType:PrimitiveType.TRIANGLES,boundingSphere:new BoundingSphere(Cartesian3.ZERO,p),offsetAttribute:e._offsetAttribute})}},BoxGeometry.getUnitBox=function(){return defined(unitBoxGeometry)||(unitBoxGeometry=BoxGeometry.createGeometry(BoxGeometry.fromDimensions({dimensions:new Cartesian3(1,1,1),vertexFormat:VertexFormat.POSITION_ONLY}))),unitBoxGeometry};export default BoxGeometry;