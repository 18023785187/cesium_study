import Cartesian3 from"./Cartesian3.js";import Check from"./Check.js";import defined from"./defined.js";import GeocodeType from"./GeocodeType.js";import Rectangle from"./Rectangle.js";import Resource from"./Resource.js";function PeliasGeocoderService(e){Check.defined("url",e),this._url=Resource.createIfNeeded(e),this._url.appendForwardSlash()}Object.defineProperties(PeliasGeocoderService.prototype,{url:{get:function(){return this._url}}}),PeliasGeocoderService.prototype.geocode=function(e,r){return Check.typeOf.string("query",e),this._url.getDerivedResource({url:r===GeocodeType.AUTOCOMPLETE?"autocomplete":"search",queryParameters:{text:e}}).fetchJson().then((function(e){return e.features.map((function(e){var r,o=e.bbox;if(defined(o))r=Rectangle.fromDegrees(o[0],o[1],o[2],o[3]);else{var t=e.geometry.coordinates[0],i=e.geometry.coordinates[1];r=Cartesian3.fromDegrees(t,i)}return{displayName:e.properties.label,destination:r}}))}))};export default PeliasGeocoderService;