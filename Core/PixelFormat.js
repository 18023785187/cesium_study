import PixelDatatype from"../Renderer/PixelDatatype.js";import WebGLConstants from"./WebGLConstants.js";var PixelFormat={DEPTH_COMPONENT:WebGLConstants.DEPTH_COMPONENT,DEPTH_STENCIL:WebGLConstants.DEPTH_STENCIL,ALPHA:WebGLConstants.ALPHA,RGB:WebGLConstants.RGB,RGBA:WebGLConstants.RGBA,LUMINANCE:WebGLConstants.LUMINANCE,LUMINANCE_ALPHA:WebGLConstants.LUMINANCE_ALPHA,RGB_DXT1:WebGLConstants.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:WebGLConstants.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:WebGLConstants.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:WebGLConstants.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:WebGLConstants.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:WebGLConstants.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:WebGLConstants.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:WebGLConstants.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:WebGLConstants.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:WebGLConstants.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:WebGLConstants.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:WebGLConstants.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:WebGLConstants.COMPRESSED_RGBA_BPTC_UNORM,componentsLength:function(t){switch(t){case PixelFormat.RGB:return 3;case PixelFormat.RGBA:return 4;case PixelFormat.LUMINANCE_ALPHA:return 2;case PixelFormat.ALPHA:case PixelFormat.LUMINANCE:default:return 1}},validate:function(t){return t===PixelFormat.DEPTH_COMPONENT||t===PixelFormat.DEPTH_STENCIL||t===PixelFormat.ALPHA||t===PixelFormat.RGB||t===PixelFormat.RGBA||t===PixelFormat.LUMINANCE||t===PixelFormat.LUMINANCE_ALPHA||t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5||t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1||t===PixelFormat.RGBA_ASTC||t===PixelFormat.RGB_ETC1||t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC||t===PixelFormat.RGBA_BC7},isColorFormat:function(t){return t===PixelFormat.ALPHA||t===PixelFormat.RGB||t===PixelFormat.RGBA||t===PixelFormat.LUMINANCE||t===PixelFormat.LUMINANCE_ALPHA},isDepthFormat:function(t){return t===PixelFormat.DEPTH_COMPONENT||t===PixelFormat.DEPTH_STENCIL},isCompressedFormat:function(t){return t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5||t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1||t===PixelFormat.RGBA_ASTC||t===PixelFormat.RGB_ETC1||t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC||t===PixelFormat.RGBA_BC7},isDXTFormat:function(t){return t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5},isPVRTCFormat:function(t){return t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1},isASTCFormat:function(t){return t===PixelFormat.RGBA_ASTC},isETC1Format:function(t){return t===PixelFormat.RGB_ETC1},isETC2Format:function(t){return t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC},isBC7Format:function(t){return t===PixelFormat.RGBA_BC7},compressedTextureSizeInBytes:function(t,e,r){switch(t){case PixelFormat.RGB_DXT1:case PixelFormat.RGBA_DXT1:case PixelFormat.RGB_ETC1:case PixelFormat.RGB8_ETC2:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*8;case PixelFormat.RGBA_DXT3:case PixelFormat.RGBA_DXT5:case PixelFormat.RGBA_ASTC:case PixelFormat.RGBA8_ETC2_EAC:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*16;case PixelFormat.RGB_PVRTC_4BPPV1:case PixelFormat.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(e,8)*Math.max(r,8)*4+7)/8);case PixelFormat.RGB_PVRTC_2BPPV1:case PixelFormat.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(e,16)*Math.max(r,8)*2+7)/8);case PixelFormat.RGBA_BC7:return Math.ceil(e/4)*Math.ceil(r/4)*16;default:return 0}},textureSizeInBytes:function(t,e,r,a){var P=PixelFormat.componentsLength(t);return PixelDatatype.isPacked(e)&&(P=1),P*PixelDatatype.sizeInBytes(e)*r*a},alignmentInBytes:function(t,e,r){var a=PixelFormat.textureSizeInBytes(t,e,r,1)%4;return 0===a?4:2===a?2:1},createTypedArray:function(t,e,r,a){var P=PixelDatatype.sizeInBytes(e);return new(P===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:P===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:P===Float32Array.BYTES_PER_ELEMENT&&e===PixelDatatype.FLOAT?Float32Array:Uint32Array)(PixelFormat.componentsLength(t)*r*a)},flipY:function(t,e,r,a,P){if(1===P)return t;for(var o=PixelFormat.createTypedArray(e,r,a,P),n=PixelFormat.componentsLength(e),_=a*n,i=0;i<P;++i)for(var R=i*a*n,G=(P-i-1)*a*n,C=0;C<_;++C)o[G+C]=t[R+C];return o},toInternalFormat:function(t,e,r){if(!r.webgl2)return t;if(t===PixelFormat.DEPTH_STENCIL)return WebGLConstants.DEPTH24_STENCIL8;if(t===PixelFormat.DEPTH_COMPONENT){if(e===PixelDatatype.UNSIGNED_SHORT)return WebGLConstants.DEPTH_COMPONENT16;if(e===PixelDatatype.UNSIGNED_INT)return WebGLConstants.DEPTH_COMPONENT24}if(e===PixelDatatype.FLOAT)switch(t){case PixelFormat.RGBA:return WebGLConstants.RGBA32F;case PixelFormat.RGB:return WebGLConstants.RGB32F;case PixelFormat.RG:return WebGLConstants.RG32F;case PixelFormat.R:return WebGLConstants.R32F}if(e===PixelDatatype.HALF_FLOAT)switch(t){case PixelFormat.RGBA:return WebGLConstants.RGBA16F;case PixelFormat.RGB:return WebGLConstants.RGB16F;case PixelFormat.RG:return WebGLConstants.RG16F;case PixelFormat.R:return WebGLConstants.R16F}return t}};export default Object.freeze(PixelFormat);