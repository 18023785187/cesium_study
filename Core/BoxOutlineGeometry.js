import arrayFill from"./arrayFill.js";import BoundingSphere from"./BoundingSphere.js";import Cartesian3 from"./Cartesian3.js";import Check from"./Check.js";import ComponentDatatype from"./ComponentDatatype.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import Geometry from"./Geometry.js";import GeometryAttribute from"./GeometryAttribute.js";import GeometryAttributes from"./GeometryAttributes.js";import GeometryOffsetAttribute from"./GeometryOffsetAttribute.js";import PrimitiveType from"./PrimitiveType.js";var diffScratch=new Cartesian3;function BoxOutlineGeometry(e){var t=(e=defaultValue(e,defaultValue.EMPTY_OBJECT)).minimum,r=e.maximum;if(Check.typeOf.object("min",t),Check.typeOf.object("max",r),defined(e.offsetAttribute)&&e.offsetAttribute===GeometryOffsetAttribute.TOP)throw new DeveloperError("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._min=Cartesian3.clone(t),this._max=Cartesian3.clone(r),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}BoxOutlineGeometry.fromDimensions=function(e){var t=(e=defaultValue(e,defaultValue.EMPTY_OBJECT)).dimensions;Check.typeOf.object("dimensions",t),Check.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),Check.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),Check.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);var r=Cartesian3.multiplyByScalar(t,.5,new Cartesian3);return new BoxOutlineGeometry({minimum:Cartesian3.negate(r,new Cartesian3),maximum:r,offsetAttribute:e.offsetAttribute})},BoxOutlineGeometry.fromAxisAlignedBoundingBox=function(e){return Check.typeOf.object("boundindBox",e),new BoxOutlineGeometry({minimum:e.minimum,maximum:e.maximum})},BoxOutlineGeometry.packedLength=2*Cartesian3.packedLength+1,BoxOutlineGeometry.pack=function(e,t,r){return Check.typeOf.object("value",e),Check.defined("array",t),r=defaultValue(r,0),Cartesian3.pack(e._min,t,r),Cartesian3.pack(e._max,t,r+Cartesian3.packedLength),t[r+2*Cartesian3.packedLength]=defaultValue(e._offsetAttribute,-1),t};var scratchMin=new Cartesian3,scratchMax=new Cartesian3,scratchOptions={minimum:scratchMin,maximum:scratchMax,offsetAttribute:void 0};BoxOutlineGeometry.unpack=function(e,t,r){Check.defined("array",e),t=defaultValue(t,0);var i=Cartesian3.unpack(e,t,scratchMin),a=Cartesian3.unpack(e,t+Cartesian3.packedLength,scratchMax),n=e[t+2*Cartesian3.packedLength];return defined(r)?(r._min=Cartesian3.clone(i,r._min),r._max=Cartesian3.clone(a,r._max),r._offsetAttribute=-1===n?void 0:n,r):(scratchOptions.offsetAttribute=-1===n?void 0:n,new BoxOutlineGeometry(scratchOptions))},BoxOutlineGeometry.createGeometry=function(e){var t=e._min,r=e._max;if(!Cartesian3.equals(t,r)){var i=new GeometryAttributes,a=new Uint16Array(24),n=new Float64Array(24);n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=r.x,n[4]=t.y,n[5]=t.z,n[6]=r.x,n[7]=r.y,n[8]=t.z,n[9]=t.x,n[10]=r.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=r.z,n[15]=r.x,n[16]=t.y,n[17]=r.z,n[18]=r.x,n[19]=r.y,n[20]=r.z,n[21]=t.x,n[22]=r.y,n[23]=r.z,i.position=new GeometryAttribute({componentDatatype:ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:n}),a[0]=4,a[1]=5,a[2]=5,a[3]=6,a[4]=6,a[5]=7,a[6]=7,a[7]=4,a[8]=0,a[9]=1,a[10]=1,a[11]=2,a[12]=2,a[13]=3,a[14]=3,a[15]=0,a[16]=0,a[17]=4,a[18]=1,a[19]=5,a[20]=2,a[21]=6,a[22]=3,a[23]=7;var o=Cartesian3.subtract(r,t,diffScratch),m=.5*Cartesian3.magnitude(o);if(defined(e._offsetAttribute)){var s=n.length,u=new Uint8Array(s/3),f=e._offsetAttribute===GeometryOffsetAttribute.NONE?0:1;arrayFill(u,f),i.applyOffset=new GeometryAttribute({componentDatatype:ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:u})}return new Geometry({attributes:i,indices:a,primitiveType:PrimitiveType.LINES,boundingSphere:new BoundingSphere(Cartesian3.ZERO,m),offsetAttribute:e._offsetAttribute})}};export default BoxOutlineGeometry;