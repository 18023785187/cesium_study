import MersenneTwister from"../ThirdParty/mersenne-twister.js";import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";var CesiumMath={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};CesiumMath.sign=defaultValue(Math.sign,(function(e){return 0==(e=+e)||e!=e?e:e>0?1:-1})),CesiumMath.signNotZero=function(e){return e<0?-1:1},CesiumMath.toSNorm=function(e,r){return r=defaultValue(r,255),Math.round((.5*CesiumMath.clamp(e,-1,1)+.5)*r)},CesiumMath.fromSNorm=function(e,r){return r=defaultValue(r,255),CesiumMath.clamp(e,0,r)/r*2-1},CesiumMath.normalize=function(e,r,t){return 0===(t=Math.max(t-r,0))?0:CesiumMath.clamp((e-r)/t,0,1)},CesiumMath.sinh=defaultValue(Math.sinh,(function(e){return(Math.exp(e)-Math.exp(-e))/2})),CesiumMath.cosh=defaultValue(Math.cosh,(function(e){return(Math.exp(e)+Math.exp(-e))/2})),CesiumMath.lerp=function(e,r,t){return(1-t)*e+t*r},CesiumMath.PI=Math.PI,CesiumMath.ONE_OVER_PI=1/Math.PI,CesiumMath.PI_OVER_TWO=Math.PI/2,CesiumMath.PI_OVER_THREE=Math.PI/3,CesiumMath.PI_OVER_FOUR=Math.PI/4,CesiumMath.PI_OVER_SIX=Math.PI/6,CesiumMath.THREE_PI_OVER_TWO=3*Math.PI/2,CesiumMath.TWO_PI=2*Math.PI,CesiumMath.ONE_OVER_TWO_PI=1/(2*Math.PI),CesiumMath.RADIANS_PER_DEGREE=Math.PI/180,CesiumMath.DEGREES_PER_RADIAN=180/Math.PI,CesiumMath.RADIANS_PER_ARCSECOND=CesiumMath.RADIANS_PER_DEGREE/3600,CesiumMath.toRadians=function(e){if(!defined(e))throw new DeveloperError("degrees is required.");return e*CesiumMath.RADIANS_PER_DEGREE},CesiumMath.toDegrees=function(e){if(!defined(e))throw new DeveloperError("radians is required.");return e*CesiumMath.DEGREES_PER_RADIAN},CesiumMath.convertLongitudeRange=function(e){if(!defined(e))throw new DeveloperError("angle is required.");var r=CesiumMath.TWO_PI,t=e-Math.floor(e/r)*r;return t<-Math.PI?t+r:t>=Math.PI?t-r:t},CesiumMath.clampToLatitudeRange=function(e){if(!defined(e))throw new DeveloperError("angle is required.");return CesiumMath.clamp(e,-1*CesiumMath.PI_OVER_TWO,CesiumMath.PI_OVER_TWO)},CesiumMath.negativePiToPi=function(e){if(!defined(e))throw new DeveloperError("angle is required.");return e>=-CesiumMath.PI&&e<=CesiumMath.PI?e:CesiumMath.zeroToTwoPi(e+CesiumMath.PI)-CesiumMath.PI},CesiumMath.zeroToTwoPi=function(e){if(!defined(e))throw new DeveloperError("angle is required.");if(e>=0&&e<=CesiumMath.TWO_PI)return e;var r=CesiumMath.mod(e,CesiumMath.TWO_PI);return Math.abs(r)<CesiumMath.EPSILON14&&Math.abs(e)>CesiumMath.EPSILON14?CesiumMath.TWO_PI:r},CesiumMath.mod=function(e,r){if(!defined(e))throw new DeveloperError("m is required.");if(!defined(r))throw new DeveloperError("n is required.");if(0===r)throw new DeveloperError("divisor cannot be 0.");return CesiumMath.sign(e)===CesiumMath.sign(r)&&Math.abs(e)<Math.abs(r)?e:(e%r+r)%r},CesiumMath.equalsEpsilon=function(e,r,t,i){if(!defined(e))throw new DeveloperError("left is required.");if(!defined(r))throw new DeveloperError("right is required.");t=defaultValue(t,0),i=defaultValue(i,t);var n=Math.abs(e-r);return n<=i||n<=t*Math.max(Math.abs(e),Math.abs(r))},CesiumMath.lessThan=function(e,r,t){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(r))throw new DeveloperError("second is required.");if(!defined(t))throw new DeveloperError("absoluteEpsilon is required.");return e-r<-t},CesiumMath.lessThanOrEquals=function(e,r,t){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(r))throw new DeveloperError("second is required.");if(!defined(t))throw new DeveloperError("absoluteEpsilon is required.");return e-r<t},CesiumMath.greaterThan=function(e,r,t){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(r))throw new DeveloperError("second is required.");if(!defined(t))throw new DeveloperError("absoluteEpsilon is required.");return e-r>t},CesiumMath.greaterThanOrEquals=function(e,r,t){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(r))throw new DeveloperError("second is required.");if(!defined(t))throw new DeveloperError("absoluteEpsilon is required.");return e-r>-t};var factorials=[1];CesiumMath.factorial=function(e){if("number"!=typeof e||e<0)throw new DeveloperError("A number greater than or equal to 0 is required.");var r=factorials.length;if(e>=r)for(var t=factorials[r-1],i=r;i<=e;i++){var n=t*i;factorials.push(n),t=n}return factorials[e]},CesiumMath.incrementWrap=function(e,r,t){if(t=defaultValue(t,0),!defined(e))throw new DeveloperError("n is required.");if(r<=t)throw new DeveloperError("maximumValue must be greater than minimumValue.");return++e>r&&(e=t),e},CesiumMath.isPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new DeveloperError("A number between 0 and (2^32)-1 is required.");return 0!==e&&0==(e&e-1)},CesiumMath.nextPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>2147483648)throw new DeveloperError("A number between 0 and 2^31 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},CesiumMath.previousPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new DeveloperError("A number between 0 and (2^32)-1 is required.");return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,((e|=e>>32)>>>0)-(e>>>1)},CesiumMath.clamp=function(e,r,t){if(!defined(e))throw new DeveloperError("value is required");if(!defined(r))throw new DeveloperError("min is required.");if(!defined(t))throw new DeveloperError("max is required.");return e<r?r:e>t?t:e};var randomNumberGenerator=new MersenneTwister;CesiumMath.setRandomNumberSeed=function(e){if(!defined(e))throw new DeveloperError("seed is required.");randomNumberGenerator=new MersenneTwister(e)},CesiumMath.nextRandomNumber=function(){return randomNumberGenerator.random()},CesiumMath.randomBetween=function(e,r){return CesiumMath.nextRandomNumber()*(r-e)+e},CesiumMath.acosClamped=function(e){if(!defined(e))throw new DeveloperError("value is required.");return Math.acos(CesiumMath.clamp(e,-1,1))},CesiumMath.asinClamped=function(e){if(!defined(e))throw new DeveloperError("value is required.");return Math.asin(CesiumMath.clamp(e,-1,1))},CesiumMath.chordLength=function(e,r){if(!defined(e))throw new DeveloperError("angle is required.");if(!defined(r))throw new DeveloperError("radius is required.");return 2*r*Math.sin(.5*e)},CesiumMath.logBase=function(e,r){if(!defined(e))throw new DeveloperError("number is required.");if(!defined(r))throw new DeveloperError("base is required.");return Math.log(e)/Math.log(r)},CesiumMath.cbrt=defaultValue(Math.cbrt,(function(e){var r=Math.pow(Math.abs(e),1/3);return e<0?-r:r})),CesiumMath.log2=defaultValue(Math.log2,(function(e){return Math.log(e)*Math.LOG2E})),CesiumMath.fog=function(e,r){var t=e*r;return 1-Math.exp(-t*t)},CesiumMath.fastApproximateAtan=function(e){return Check.typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},CesiumMath.fastApproximateAtan2=function(e,r){var t,i;Check.typeOf.number("x",e),Check.typeOf.number("y",r);var n=Math.abs(e);t=Math.abs(r),i=Math.max(n,t);var a=(t=Math.min(n,t))/i;if(isNaN(a))throw new DeveloperError("either x or y must be nonzero");return n=CesiumMath.fastApproximateAtan(a),n=Math.abs(r)>Math.abs(e)?CesiumMath.PI_OVER_TWO-n:n,n=e<0?CesiumMath.PI-n:n,r<0?-n:n};export default CesiumMath;