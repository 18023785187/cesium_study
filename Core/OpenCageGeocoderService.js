import Cartesian3 from"./Cartesian3.js";import Check from"./Check.js";import combine from"./combine.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import Rectangle from"./Rectangle.js";import Resource from"./Resource.js";function OpenCageGeocoderService(e,r,t){Check.defined("url",e),Check.defined("apiKey",r),defined(t)&&Check.typeOf.object("params",t),(e=Resource.createIfNeeded(e)).appendForwardSlash(),e.setQueryParameters({key:r}),this._url=e,this._params=defaultValue(t,{})}Object.defineProperties(OpenCageGeocoderService.prototype,{url:{get:function(){return this._url}},params:{get:function(){return this._params}}}),OpenCageGeocoderService.prototype.geocode=function(e){return Check.typeOf.string("query",e),this._url.getDerivedResource({url:"json",queryParameters:combine(this._params,{q:e})}).fetchJson().then((function(e){return e.results.map((function(e){var r,t=e.bounds;if(defined(t))r=Rectangle.fromDegrees(t.southwest.lng,t.southwest.lat,t.northeast.lng,t.northeast.lat);else{var o=e.geometry.lat,a=e.geometry.lng;r=Cartesian3.fromDegrees(o,a)}return{displayName:e.formatted,destination:r}}))}))};export default OpenCageGeocoderService;